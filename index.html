<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Répertoire de Plaques</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #eee; }
    input { padding: 6px; margin-right: 10px; }
    button { padding: 6px 12px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Répertoire de Plaques d'Immatriculation</h1>

  <div>
    <input id="plaque" type="text" placeholder="Plaque" />
    <input id="vehicule" type="text" placeholder="Véhicule / Modèle" />
    <input id="couleur" type="text" placeholder="Couleur" />
    <input id="proprio" type="text" placeholder="Propriétaire" />
    <button onclick="ajouter()">Ajouter</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>Plaque</th>
        <th>Véhicule</th>
        <th>Couleur</th>
        <th>Propriétaire</th>
      </tr>
    </thead>
    <tbody id="tableau"></tbody>
  </table>

  <script>
    function ajouter() {
      const plaque = document.getElementById('plaque').value;
      const vehicule = document.getElementById('vehicule').value;
      const couleur = document.getElementById('couleur').value;
      const proprio = document.getElementById('proprio').value;

      if (!plaque) return alert('La plaque est obligatoire');

      const tableau = document.getElementById('tableau');
      const row = document.createElement('tr');

      row.innerHTML = `
        <td>${plaque}</td>
        <td>${vehicule}</td>
        <td>${couleur}</td>
        <td>${proprio}</td>
      `;

      tableau.appendChild(row);

      document.getElementById('plaque').value = '';
      document.getElementById('vehicule').value = '';
      document.getElementById('couleur').value = '';
      document.getElementById('proprio').value = '';
    }
  </script>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script>
    // 1. CONFIGURATION FIREBASE (à remplacer par tes clés)
    const firebaseConfig = {
    apiKey: "AIzaSyAFXsHbbtdQjT3xebw9cehUytV46S9qO1g",
    authDomain: "repertoireplaques.firebaseapp.com",
    projectId: "repertoireplaques",
    storageBucket: "repertoireplaques.firebasestorage.app",
    messagingSenderId: "1007663760164",
    appId: "1:1007663760164:web:327a6baf74020612c469b1",
    measurementId: "G-TC8MRJLGE3"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function ajouter() {
      const plaque = document.getElementById('plaque').value;
      const vehicule = document.getElementById('vehicule').value;
      const couleur = document.getElementById('couleur').value;
      const proprio = document.getElementById('proprio').value;

      if (!plaque) return alert('La plaque est obligatoire');

      await db.collection("plaques").add({
        plaque,
        vehicule,
        couleur,
        proprio,
        date: new Date()
      });

      charger();

      document.getElementById('plaque').value = '';
      document.getElementById('vehicule').value = '';
      document.getElementById('couleur').value = '';
      document.getElementById('proprio').value = '';
    }

    async function charger() {
      const tableau = document.getElementById('tableau');
      tableau.innerHTML = '';

      const snapshot = await db.collection("plaques").orderBy("date", "asc").get();

      snapshot.forEach(doc => {
        const data = doc.data();
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${data.plaque}</td>
          <td>${data.vehicule}</td>
          <td>${data.couleur}</td>
          <td>${data.proprio}</td>
        `;
        tableau.appendChild(row);
      });
    }

    // Charge les données au démarrage
    charger();
  </script>
</body>
</html>
